% Template for a CDF graph
%
% Author: Zengwen Yuan
% Version: 1.0  2017-03-08 init version
% Note: to use package fontspec,
% use XeLaTeX to compile

\documentclass{article}
\usepackage{siunitx}
% \usepackage{tikz}
\usepackage{pgfplots}
\usepackage{pgfplotstable}
\usepackage{verbatim}
\usepackage[active,tightpage]{preview}
\PreviewEnvironment{tikzpicture}
\setlength\PreviewBorder{1pt}
\usetikzlibrary{patterns}

\pgfplotsset{compat=newest}

\usepackage{fontspec}
\setmainfont[
BoldFont={Helvetica Neue Bold},
ItalicFont={Helvetica Neue Italic},
BoldItalicFont={Helvetica Neue Bold Italic}
]{Helvetica Neue}

% # user-study-sync-overhead-context-tx-v2.txt
\pgfplotstableread{
0   0
1000   0.1
5000   0.8
10000   0.95
20000   1
}{\fakedata}

\makeatletter
\pgfplotsset{
my filter/.style args={every#1between#2and#3}{%
/pgfplots/x filter/.append code={%
\ifnum\coordindex<#2%
  % Nothing
\else% Did we pass #3?
  \ifnum\coordindex>#3%
    %Nothing
  \else% Ok filter is on, don't disturb \pgfmathresult for convenience
    \pgfmathsetmacro\temp{int(mod(\coordindex,#1))}%
    \ifnum0=\temp\relax% Are we on the nth point?
      % Yes do nothing let it pass
    \else% discard it
      \let\pgfmathresult\pgfutil@empty
    \fi%
  \fi%
\fi%
}}}
\makeatother

\pgfplotsset{
    compat=newest,
    legend image code/.code={
        \draw[mark repeat=2,mark phase=2]
        plot coordinates {
            (0cm,0cm)
            (0.3cm,0cm)        %% default is (0.3cm,0cm)
            (0.6cm,0cm)         %% default is (0.6cm,0cm)
        };%
    }
}

% \definecolor{palette1}{RGB}{215,25,28}
% \definecolor{palette2}{RGB}{253,174,97}
% % \definecolor{palette3}{RGB}{255,255,191}
% \definecolor{palette3}{RGB}{208,28,139}
% \definecolor{palette4}{RGB}{184,225,134}
% % \definecolor{palette4}{RGB}{171,221,164}
% \definecolor{palette5}{RGB}{43,131,186}
% \definecolor{palette6}{RGB}{208,28,139}

% green -- blueish
% \definecolor{palette1}{RGB}{0,109,44}
% \definecolor{palette2}{RGB}{44,162,95}
% \definecolor{palette3}{RGB}{67,162,202}
% \definecolor{palette4}{RGB}{8,104,172}
% \definecolor{palette5}{RGB}{8,81,156}

\definecolor{myred}{RGB}{202,0,32}
\definecolor{myorange}{RGB}{244,165,130}
\definecolor{myviolet}{RGB}{194,165,207}
\definecolor{mycyan}{RGB}{146,197,222}
\definecolor{myblue}{RGB}{5,113,176}
\definecolor{mygreen}{RGB}{127,191,123}
\definecolor{mytile}{RGB}{27,120,55}
% \definecolor{palette3}{RGB}{247,247,247}

\begin{document}

\begin{tikzpicture}
\begin{axis}[
    % my filter=every 100 between 0 and 18000,
    % line width = 1pt,
    % ybar,
    ymax    = 105,
    ymin    = 0,
    xmax    = 3.3,
    xmin    = 0,
    width   = 5.5 cm,
    height  = 3 cm,
    scale only axis = true,
    xtick align = inside,
    % bar width   = 7pt,
    % enlarge x limits = auto,
    % xticklabel style = {
    %     font=\small,
    %     % at={(current axis.north west)},
    %     % rotate=-90,
    %     % xshift=-1ex,
    %     yshift = 2pt,
    % },
    tick label style={/pgf/number format/assume math mode=true},
    xtick = {0, 0.5, ..., 3},
    ytick = {0, 20, ..., 100},
    % % xticklabel pos=right,
    % xtick pos = left,
    % ytick pos = left,
    % % yticklabel pos=right,
    % % enlargelimits=0.15,
    legend style={
        at      = {(0.95, 0.05)},
        font    = \small,
        fill    = none,
        draw    = none,
        anchor  = south east,
        legend cell align   = left,
        legend columns      = 1,
    },
    % ylabel = {\begin{tabular}{cc}Atomic consistency\\overhead (\%)\end{tabular}},
    ylabel={CDF (\%)},
    %xlabel={Data suspension latency (\si{\second})},
    xlabel={Data suspension (\si{\second})},
    ylabel style={
        font=\small,
        % at={(current axis.north west)},
        % rotate=-90,
        % xshift=-1ex,
        yshift = -10 pt,
    },
    xlabel style={
        font=\small,
        % at={(current axis.north west)},
        % rotate=-90,
        % xshift=-1ex,
        yshift = 5 pt,
    },
    % symbolic x coords={att, tmo, sprint, cmcc, fi},
    % xticklabels={AT\&T, T-Mobile, Sprint, China Mobile, Google-Fi},
    % xtick=data,
    % nodes near coords,
    % nodes near coords align={vertical},
    ]
% \addplot+[
%     no markers,
%     color       = palette3,
%     line width  = 2pt,
%     line cap    = round,
%     line join   = round,
%     ]%[pattern = crosshatch, pattern color = blue!50, line width = 0.8pt]
%     table[
%         x expr = \thisrowno{0}/1000,
%         y expr = \thisrowno{1}*100,
%     ] {\fakedata};

% \addplot+[
%    color       = palette1,
%         no markers,
%         line width  = 2pt,
%    samples=201,
% ]
%    {100-x^2};
% \addplot+[
%    color       = palette2,
%         no markers,
%         line width  = 2pt,
%    samples=201,
% ]
%    {90-x^2};
% \addplot+[
%    color       = palette3,
%         no markers,
%         line width  = 2pt,
%    samples=201,
% ]
%    {80-x^2};
% \addplot+[
%    color       = palette4,
%         no markers,
%         line width  = 2pt,
%    samples=201,
% ]
%    {70-x^2};
% \addplot+[
%    color       = palette5,
%         no markers,
%         line width  = 2pt,
%    samples=201,
% ]
%    {60-x^2};

    % \addplot+[
    %     no markers,
    %     dashdotdotted,
    %     color       = myred,
    %     line width  = 2pt,
    %     line cap    = round,
    %     line join   = round,
    %     each nth point={100},
    % ]
    % table[
    %     x expr = \thisrowno{0}/1000,
    %     y expr = \thisrowno{1}*100,
    % ] {ha-mobility-ulink.txt};
    \addplot+[
        no markers,
        loosely dotted,
        color       = myorange,
        line width  = 1.5pt,
        line cap    = round,
        line join   = round,
        each nth point={100},
    ]
    table[
        x expr = \thisrowno{0}/1000,
        y expr = \thisrowno{1}*100,
    ] {cdf-example1.dat};
    % \addplot+[
    %     no markers,
    %     dotted,
    %     color       = mygreen,
    %     line width  = 2pt,
    %     line cap    = round,
    %     line join   = round,
    %     each nth point={100},
    % ]
    % table[
    %     x expr = \thisrowno{0}/1000,
    %     y expr = \thisrowno{1}*100,
    % ] {tau.txt};
    %\addplot+[
       % no markers,
        %dashed,
        %color       = myblue,
        %line width  = 2pt,
        %line cap    = round,
        %line join   = round,
       % each nth point={100},
    %]
    %table[
       % x expr = \thisrowno{0}/1000,
       % y expr = \thisrowno{1}*100,
    %] {reattach.txt};

%\legend{DAC-uplink, DAC-downlink, 4G-uplink/downlink};
\legend{HAFT-uplink, HAFT-downlink, 4G-uplink/downlink};
\end{axis}
\end{tikzpicture}

\end{document}